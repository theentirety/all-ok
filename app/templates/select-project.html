<!-- ko if: auth.currentUser() && header.activePage() == 0 -->
<div id="select-project" class="screen" data-bind="visible: steps.currentStep() == 0">
	<div class="page-header">
		<h1>Select projects</h1>
		<button class="add" data-bind="visible: auth.isAdmin, tap: selectProject.toggleAddMode"><span class="fa fa-plus"></span></button>
		<!-- <div class="toggle" data-bind="tap: selectProject.toggleView">
			<button data-bind="css: { active: selectProject.viewType() == 'all' }">all</button>
			<button data-bind="css: { active: selectProject.viewType() == 'selected' }"><span class="fa fa-check"></span></button>
		</div> -->
	</div>
	<ul data-bind="foreach: selectProject.allProjects, dragdown: selectProject.dragRefresh, drag: selectProject.startRefreshDrag" class="all-projects">
		<!-- ko if: ($data.attributes.active() || $parent.selectProject.viewType() == 'all') && !$data.attributes.archived -->
		<li data-bind="css: { active: $data.attributes.active(), 'internal': $data.attributes.company == 'Internal' }, tap: $parent.selectProject.toggleProject">
			<span class="company" data-bind="text: (attributes.company == 'Internal' ? 'Internal' : attributes.company) + ':'"></span>
			<span class="project" data-bind="text: attributes.name"></span>
			<span class="check fa fa-check" data-bind="visible: attributes.active"></span>
		</li>
		<!-- /ko -->
	</ul>
	<div class="refresh"><span class="fa fa-arrow-circle-down"></span> Pull to refresh</div>
</div>
<div class="modal add-project" data-bind="fadeVisible: selectProject.isAddMode">
	<div class="container">
		<div class="title">
			<h2>Add Project</h2>
			<button data-bind="tap: selectProject.toggleAddMode"><span class="fa fa-times"></span></button>
		</div>
		<div class="content">
			<div class="typeahead">
				<div class="input-group input-group-lg">
					<!-- <span class="input-group-addon">Company</span> -->
					<input class="project-typeahead-field form-control" type="text" data-bind="event: { keyup: selectProject.showTypeaheadResults }" autocapitalize="on" autocorrect="off" placeholder="Company">
				</div>
				<ul class="project-typeahead" data-bind="foreach: selectProject.filteredProjectList, visible: selectProject.filteredProjectList().length > 0">
					<li data-bind="text: $data, tap: $parent.selectProject.selectProjectTypeahead"></li>
				</ul>
			</div>
			<div class="input-group input-group-lg">
				<!-- <span class="input-group-addon">Project</span> -->
				<input class="project-name-field form-control" type="text" autocapitalize="on" autocorrect="on" placeholder="Project">
			</div>
		</div>
		<div class="footer">
			<button class="btn btn-default" data-bind="tap: selectProject.saveNewProject">Save</button>
			<span data-bind="tap: selectProject.toggleAddMode">Cancel</span>
		</div>
	</div>
</div>
<!-- /ko