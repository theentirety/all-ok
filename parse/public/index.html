<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="description" content="A simple app to allocate people to projects." />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="author" content="Intuitive Company" />
    
    <title>allocate</title>
    <link href="styles/app.css" rel="stylesheet" />
    <link rel="shortcut icon" href="favicon.png" />
  </head>

  <body>
    <!-- Gulp compiled html templates -->
    <div id="bg" data-bind="visible: !auth.currentUser()"></div>
<div id="auth" data-bind="fadeVisible: !auth.currentUser()">
	<div class="alert" data-bind="visible: auth.errorMessage().length > 0 && (auth.signInMode() || auth.signUpMode() || auth.forgotMode())">
		<span data-bind="text: auth.errorMessage"></span>
	</div>
	<div class="content" data-bind="fadeVisible: (!auth.signInMode() && !auth.signUpMode() && !auth.forgotMode() && !auth.currentUser())">
		<img src="svg/logo.svg" />
		<h1>Let's make sure all the right people are in all the right places.</h1>
		<div class="footer">
			<button type="button" class="green" data-bind="click: auth.goSignUp">Create an account</button><br />
			<button type="button" class="clear" data-bind="click: auth.goSignIn">Already have an account? <strong>Log in now</strong></button>
		</div>
	</div>
	<div class="panel sign-up" data-bind="slidePanelVisible: auth.signUpMode">
		<form data-bind="submit: auth.signInUp">
			<h2>Sign Up</h2>
			<button type="button" class="clear cancel fa fa-times-circle" data-bind="click: auth.goSignUp"></button>
			<input name="auth_email" type="text" placeholder="Email" autocapitalize="off" autocorrect="off">
			<input name="auth_displayName" type="text" placeholder="First and Last" autocapitalize="on" autocorrect="off">
			<input name="auth_password" type="password" placeholder="Password">
			<input name="auth_confirmPassword" type="password" placeholder="Confirm password">
			<button type="submit" class="green">Join</button>
		</form>
	</div>
	<div class="panel sign-in" data-bind="slidePanelVisible: auth.signInMode() && !auth.forgotMode()">
		<form data-bind="submit: auth.signInUp">
			<h2>Log In</h2>
			<button type="button" class="clear cancel fa fa-times-circle" data-bind="click: auth.goSignIn"></button>
			<input name="auth_email" type="text" placeholder="Email" autocapitalize="off" autocorrect="off">
			<input name="auth_password" type="password" placeholder="Password">
			<button type="submit" class="green">Log in</button>
			<div class="forgot" data-bind="click: auth.goForgot">Forgot your password?</div>
		</form>
	</div>
	<div class="panel forgot" data-bind="slidePanelVisible: auth.forgotMode">
		<form data-bind="submit: auth.forgot">
			<h2>We'll email you a link so you can reset your password.</h2>
			<button type="button" class="clear cancel fa fa-times-circle" data-bind="click: auth.goForgot"></button>
			<input name="auth_forgot" type="text" placeholder="Email" autocapitalize="off" autocorrect="off">
			<button type="submit" class="green">Reset Password</button>
		</form>
	</div>
</div>
<div id="header" data-bind="fadeVisible: auth.currentUser">
	<img src="svg/logo.svg" />
	<button type="button" class="green logout" data-bind="click: auth.logout">Log out</button>
</div>
<div id="report" class="panel" data-bind="slidePanelVisible: report.show() && auth.currentUser()">
	<div class="sub-header">
		<div class="toggle-weeks" data-bind="foreach: report.weeks">
			<button data-bind="click: function() { $parent.report.selectWeek($index()) }, css: { active: $parent.report.activeWeek() == $index()}">
				<span class="date" data-bind="text: date"></span>
			</button>
		</div>
		<div class="filters">
			<div class="toggle" data-bind="click: report.toggleView">
				<button data-bind="css: { active: report.viewType() == 'hours' }"><span class="fa fa-clock-o"></span></button>
				<button data-bind="css: { active: report.viewType() == 'percent' }">%</button>
			</div>
		</div>
	</div>
	<ul class="content" data-bind="foreach: report.times()[report.activeWeek()]">
		<li data-bind="isotope: {container: '#report>.content', itemSelector: '.isoitems'}" class="isoitems">
			<h2 data-bind="text: attributes.user.attributes.displayName"></h2>
			<div class="details">
				<div class="avatar" data-bind="style: { 'background-image': 'url(data:image/png;base64,' + $data.attributes.user.attributes.avatar + ')' }"></div>
				<div class="snapshot" data-bind="css: { over: attributes.total() > 100 }">
					<span class="percent" data-bind="text: attributes.total() * ($parent.report.viewType() == 'hours' ? 0.4 : 1)"></span>
					<span class="label" data-bind="text: ($parent.report.viewType() == 'hours' ? 'hr' : '%')"></span>
				</div>
			</div>
			<ol class="projects">
				<!-- ko foreach: $data.attributes.data.projects -->
				<li class="percentage-container" data-bind="css: { over: percentage > 100 }">
					<div class="name">
						<span class="percent" data-bind="text: percentage * ($root.report.viewType() == 'hours' ? 0.4 : 1)"></span>
						<span class="label" data-bind="text: ($root.report.viewType() == 'hours' ? 'hr' : '%')"></span>
						<span class="company" data-bind="text: $root.report.getCompanyName(id) + ':'"></span>
						<span class="project" data-bind="text: $root.report.getProjectName(id)"></span>
					</div>
					<div class="percentage" data-bind="style: { width: $data.percentage * .666 + '%' }"></div> 
				</li>
				<!-- /ko -->
			</ol>
		</li>
	</ul>
</div>

    <!--
    Scripts
    ================================================== 
    Placed at the end of the document so the pages load faster -->
    <!-- <script src="scripts/app.js"></script> -->
    <script src="scripts/vendor.js"></script>
    <script src="scripts/main.js"></script>
  </body>
</html>
