<div id="bg" data-bind="visible: !auth.currentUser()"></div>
<div id="auth" data-bind="fadeVisible: !auth.currentUser()">
	<div class="alert" data-bind="visible: auth.errorMessage().length > 0 && (auth.signInMode() || auth.signUpMode() || auth.forgotMode())">
		<span data-bind="text: auth.errorMessage"></span>
	</div>
	<div class="content" data-bind="fadeVisible: (!auth.signInMode() && !auth.signUpMode() && !auth.forgotMode() && !auth.currentUser())">
		<img src="svg/logo.svg" />
		<h1>Let's make sure all the right people are in all the right places.</h1>
		<div class="footer">
			<button type="button" class="green" data-bind="click: auth.goSignUp">Create an account</button><br />
			<button type="button" class="clear" data-bind="click: auth.goSignIn">Already have an account? <strong>Log in now</strong></button>
		</div>
	</div>
	<div class="panel sign-up" data-bind="slidePanelVisible: auth.signUpMode">
		<form data-bind="submit: auth.signInUp">
			<h2>Sign Up</h2>
			<button type="button" class="clear cancel fa fa-times-circle" data-bind="click: auth.goSignUp"></button>
			<input name="auth_email" type="text" placeholder="Email" autocapitalize="off" autocorrect="off">
			<input name="auth_displayName" type="text" placeholder="First and Last" autocapitalize="on" autocorrect="off">
			<input name="auth_password" type="password" placeholder="Password">
			<input name="auth_confirmPassword" type="password" placeholder="Confirm password">
			<button type="submit" class="green">Join</button>
		</form>
	</div>
	<div class="panel sign-in" data-bind="slidePanelVisible: auth.signInMode() && !auth.forgotMode()">
		<form data-bind="submit: auth.signInUp">
			<h2>Log In</h2>
			<button type="button" class="clear cancel fa fa-times-circle" data-bind="click: auth.goSignIn"></button>
			<input name="auth_email" type="text" placeholder="Email" autocapitalize="off" autocorrect="off">
			<input name="auth_password" type="password" placeholder="Password">
			<button type="submit" class="green">Log in</button>
			<div class="forgot" data-bind="click: auth.goForgot">Forgot your password?</div>
		</form>
	</div>
	<div class="panel forgot" data-bind="slidePanelVisible: auth.forgotMode">
		<form data-bind="submit: auth.forgot">
			<h2>We'll email you a link so you can reset your password.</h2>
			<button type="button" class="clear cancel fa fa-times-circle" data-bind="click: auth.goForgot"></button>
			<input name="auth_forgot" type="text" placeholder="Email" autocapitalize="off" autocorrect="off">
			<button type="submit" class="green">Reset Password</button>
		</form>
	</div>
</div>
<div id="header" data-bind="fadeVisible: auth.currentUser">
	<button type="button" class="green logout" data-bind="click: auth.logout">Log out</button>
</div>
<div id="report" class="panel" data-bind="slidePanelVisible: report.show() && auth.currentUser()">
	<ul class="content" data-bind="foreach: report.times()[report.activeWeek()]">
		<li data-bind="isotope: {container: '#report>.content', itemSelector: '.isoitems'}" class="isoitems">
			<h2 data-bind="text: attributes.user.attributes.displayName"></h2>
			<div class="details">
				<div class="avatar" data-bind="style: { 'background-image': 'url(data:image/png;base64,' + $data.attributes.user.attributes.avatar + ')' }"></div>
				<div class="snapshot" data-bind="css: { over: attributes.total() > 100 }">
					<span class="percent" data-bind="text: attributes.total() * ($parent.report.viewType() == 'hours' ? 0.4 : 1)"></span>
					<span class="label" data-bind="text: ($parent.report.viewType() == 'hours' ? 'hr' : '%')"></span>
				</div>
			</div>
			<ol class="projects">
				<!-- ko foreach: $data.attributes.data.projects -->
				<li class="percentage-container" data-bind="css: { over: percentage > 100 }">
					<div class="name">
						<span class="percent" data-bind="text: percentage * ($root.report.viewType() == 'hours' ? 0.4 : 1)"></span>
						<span class="label" data-bind="text: ($root.report.viewType() == 'hours' ? 'hr' : '%')"></span>
						<span class="company" data-bind="text: $root.report.getCompanyName(id) + ':'"></span>
						<span class="project" data-bind="text: $root.report.getProjectName(id)"></span>
					</div>
					<div class="percentage" data-bind="style: { width: $data.percentage * .666 + '%' }"></div> 
				</li>
				<!-- /ko -->
			</ol>
		</li>
	</ul>
</div>